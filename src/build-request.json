{
  "kind": "build_request",
  "title": "Refine manual revision marking with persistent red/green status indicators",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Keep all scheduled revision sessions marked in red (using existing missed revision styling) until the user manually marks them as reviewed",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "scheduled topics remain marked in red until I manually mark them as reviewed"
        ]
      },
      "acceptanceCriteria": [
        "All revision schedules default to isReviewed: false when created",
        "Revision sessions remain in 'not reviewed' state regardless of date passing",
        "Only explicit user action changes isReviewed to true"
      ]
    },
    {
      "id": "REQ-2",
      "text": "When a user marks a revision as reviewed, change its visual indicator to green and update the backend state to persist this completion status",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "Once I mark a topic as reviewed, it should turn green and the schedule continues as planned"
        ]
      },
      "acceptanceCriteria": [
        "Mark as reviewed action updates isReviewed field to true in backend",
        "Reviewed revisions display with green visual indicator (checkmark or color)",
        "State persists across page refreshes and sessions",
        "Revision schedule continues normally after marking as reviewed"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add mark as reviewed functionality in the calendar view for revision sessions displayed on selected dates",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "This option to mark as reviewed should be available in both the calendar view and the topics sec"
        ]
      },
      "acceptanceCriteria": [
        "Calendar view shows revision sessions with red/green status indicators",
        "Users can click or interact with revision sessions in calendar to mark them reviewed",
        "Visual feedback confirms the action was successful",
        "Calendar updates to show green status immediately after marking"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Ensure mark as reviewed functionality is available in the topics section for all displayed revision schedules",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-final"
        ],
        "quotes": [
          "This option to mark as reviewed should be available in both the calendar view and the topics sec"
        ]
      },
      "acceptanceCriteria": [
        "Topics view shows all revision schedules with red/green status indicators",
        "Each revision session has a clear mark as reviewed action button",
        "Status updates reflect immediately in the topics view",
        "Completed revision count is visible per topic"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Display a count or indicator showing how many times each topic has been reviewed (completed revisions)",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-earlier"
        ],
        "quotes": [
          "So that I will know how many times I have completed revising each topic"
        ]
      },
      "acceptanceCriteria": [
        "Each topic shows total number of completed reviews",
        "Counter updates when revisions are marked as reviewed",
        "Count is visible in both topics section and topic detail view"
      ]
    }
  ],
  "constraints": [
    "Preserve existing revision schedule calculation logic",
    "Maintain compatibility with existing isReviewed field in RevisionSchedule",
    "Do not change the spaced repetition interval settings",
    "Keep existing calendar and topics view layouts functional"
  ],
  "nonGoals": [
    "Automatic marking of revisions as complete when date passes",
    "Changing the spaced repetition algorithm or intervals",
    "Adding bulk mark as reviewed functionality",
    "Implementing undo functionality for marking reviews"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}