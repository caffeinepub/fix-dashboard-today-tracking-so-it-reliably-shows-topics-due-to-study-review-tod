{
  "kind": "build_request",
  "title": "Implement manual revision completion workflow with missed revision indicators",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the backend revision completion logic so that a revision is marked as completed only when explicitly marked as reviewed by the user, not automatically based on date passage",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "A revision is completed only when manually marked reviewed"
        ]
      },
      "acceptanceCriteria": [
        "Revisions remain in pending state until user explicitly marks them as reviewed",
        "The completion timestamp reflects when the user marked it reviewed, not the scheduled date"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add visual indicators in the calendar view to show missed revisions in red for dates where scheduled revisions were not marked as reviewed",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "missed dates appear in red until reviewed"
        ]
      },
      "acceptanceCriteria": [
        "Calendar dates with unreviewed past revisions display in red color",
        "Red indicators remain visible until the revision is marked as reviewed",
        "Visual distinction between upcoming (scheduled) and overdue (missed) revisions"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add 'Mark as Reviewed' action button in the TodayView dashboard that allows users to complete revisions for subtopics due on the selected date",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "marking should be possible from both dashboard and calendar"
        ]
      },
      "acceptanceCriteria": [
        "Button is visible for each pending revision in the dashboard",
        "Clicking the button marks the revision as completed and updates the UI immediately",
        "Completed revisions show completion status and timestamp"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add 'Mark as Reviewed' action button in the SubTopicScheduleView calendar dialog that allows users to complete revisions when viewing a subtopic's schedule from the calendar",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "marking should be possible from both dashboard and calendar"
        ]
      },
      "acceptanceCriteria": [
        "Button appears for pending revisions when viewing subtopic schedule from calendar",
        "Marking a revision as reviewed updates both the schedule view and calendar display",
        "Button is disabled or hidden for already completed revisions"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Ensure that when a missed revision is marked as reviewed after its scheduled date, it transitions from red (missed) to completed status in all views",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "missed dates appear in red until reviewed"
        ]
      },
      "acceptanceCriteria": [
        "Marking a late revision as reviewed removes red missed indicators",
        "Calendar updates to reflect completion status immediately",
        "Dashboard no longer shows the revision as overdue after completion"
      ]
    }
  ],
  "constraints": [
    "Do not automatically mark revisions as completed based on date alone",
    "Preserve existing revision schedule generation logic",
    "Maintain the existing SubTopicScheduleView dialog structure"
  ],
  "nonGoals": [
    "Automatic completion of revisions",
    "Bulk marking multiple revisions as reviewed at once",
    "Email or notification reminders for missed revisions"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}